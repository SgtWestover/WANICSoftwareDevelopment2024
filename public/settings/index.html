<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <!--title and external dependencies and stylesheet-->
  <title>Settings</title>
  <link rel="stylesheet" href="SettingsStyle.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
</head>

<body>
  <header>
      <h1>
        <!-- Month and year headers at the top, doubling as dropdown menus-->
        <div id="month-header" onclick="monthHeaderClick()"></div>
        <div id="year-header" onclick="yearHeaderClick()"></div>  
        <h1>
          <headertext>Settings</headertext>
        </h1>
      </h1>
  </header>
  <div class="sidebar">
    <a href="../calendar/">Calendar</a>
    <a href="../teams/">Teams</a>
    <a href="../schedule/">Schedule</a>
    <a class="active" href="#home">Settings</a>
  </div>
  <iframe id="hiddenDownloader" name="hiddenDownloader" style="display: none;"></iframe>
  <input type="file" id="fileInput" style="display: none;" onchange="handleFileImport(this.files)" accept=".json">
  <!-- Sign out and delete account buttons on the upper right hand corner-->
  <usersettingsbuttoncolumn>
    <h1>
      <button id ="signout" onclick="signout()">Logout</button>
      <button id ="delete-account" onclick="deleteAccount()">Delete Account</button>
      <button id ="change-name">Change Name</button>
      <button id ="change-password" onclick="changePasswordStart()">Change Password</button>
      <button id ="change-notifications" onclick="changeNotificationsStart()">Change Notifications</button>
      <button id ="export-events" onclick="exportEventsStart()">Export Events</button>
      <button id ="import-events" onclick="importEventsStart()">Import Events</button>
      <button id ="clear-events" onclick="clearEventsStart()">Clear Events</button>
    </h1>
  </usersettingsbuttoncolumn>
  <div id="passwordModal" class="modal">
    <div class="modal-content">
        <span class="close">&times;</span>
        <p>Please enter your password to delete your account</p>
        <input type="password" id="passwordInput" class="password-input"> <!-- Password input field -->
        <i id="togglePassword" class="fa fa-eye"></i> <!-- Toggle password visibility -->
        <button id="submitPassword">Submit</button>
        <div id="passwordError" style="color: red;"></div> <!-- Error message element -->
    </div>
  </div>
      <!-- Confirmation Modal for the second step of the delete account logic-->
  <div id="confirmationModal" class="modal">
    <div class="modal-content">
      <span class="close">&times;</span>
      <p>Are you sure you want to delete your account?</p>
      <button id="confirmDelete">Yes, delete my account</button>
      <button id="cancelDelete">Cancel</button>
    </div>
  </div>  
  <div id="changeNameModal" class="modal">
    <div class="modal-content">
      <span class="close" id="closeChangeNameModal">&times;</span>
      <p>Please enter your new name (You can only do this 3 times)</p>
      <input type="text" id="newName" placeholder = "Enter new username" class="button">
      <button id="newNameSubmit">Submit</button>
      <div id="changeNameError" style="color: red;"></div>
    </div>
  </div>
  <div id="changePasswordModal" class="modal">
    <div class="modal-content">
        <span class="close" id="closeChangePasswordModal">&times;</span>
        <p>Please enter your password to change your password</p>
        <input type="password" id="currentPassword" class="password-input"> <!-- Current Password input field -->
        <i id="toggleCurrentPassword" class="fa fa-eye"></i> <!-- Toggle current password visibility -->
        <button id="submitCurrentPassword">Submit</button>
        <div id="newPasswordSection" style="display: none;"> <!-- New password section, hidden by default -->
          <p>Please enter your new password</p>
          <input type="password" id="newPassword" class="password-input"> <!-- New Password input field -->
          <i id="toggleNewPassword" class="fa fa-eye"></i> <!-- Toggle new password visibility -->
          <button id="submitNewPassword">Submit New Password</button>
        </div>
        <div id="changePasswordError" style="color: red;"></div> <!-- Error message element -->
    </div>
  </div>
  <div id="clearEventsModal" class="modal">
    <div class="modal-content">
      <span class="close" id="closeClearEventsModal">&times;</span>
      <p>Are you sure you want to clear all events?</p>
      <button id="clearEventsConfirm">Yes</button>
      <button id="clearEventsDeny">No</button>
      <div id="clearEventsError" style="color: red;"></div> <!-- Error message element -->
    </div>
  </div>
  <div id="manageNotifsModal" class="modal">
    <div class="modal-content">
        <span class="close" id="closeManageNotifsModal">&times;</span>
        <p>Manage Notifications</p>
        <div>
          <label for="ignoreTeamInvites">Ignore Team Invites:</label>
          <input type="checkbox" id="ignoreTeamInvites">
        </div>
        <div>
          <label for="rejectTeamInvites">Automatically Reject Team Invites:</label>
          <input type="checkbox" id="rejectTeamInvites">
        </div>
        <div>
          <label for="muteAllNotifs">Mute All Notifications:</label>
          <input type="checkbox" id="muteAllNotifs">
        </div>
        <button id="muteSpecificTeam">Mute Specific Team</button>
        <button id="unmuteSpecificTeam">Unmute Specific Team</button>
        <button id="submitNotificationSettings">Submit Notification Settings</button>
        <div id="manageNotifsError" style="color: red;"></div> <!-- Error message element -->
    </div>
  </div>
  <div id="teamCodeModal" class="modal">
    <div class="modal-content">
        <span class="close" id="closeTeamCodeModal">&times;</span>
        <p>Enter Team Code</p>
        <input type="text" id="teamCodeInput" class="text-input">
        <button id="submitTeamCode">Submit</button>
        <div id="teamCodeError" style="color: red;"></div>
    </div>
</div>
  <script src="/settings/settingsFormat.js"></script>
  <script src="/settings/account.js"></script>
</body>
</html>